<!-- youtube-video-player - JuanMa - 10.8.19  -->

<style>
div.page > header ~ .container .jmr-video-cb a{
  color: white;
}
div.page > header ~ .container .jmr-controlls a{
  color: black;
  display: flex;
}
.jmr-video-cb .jmr-controlls{
    width: 98%;
    margin: 0 auto;
    padding: 0.2% 1%;
    display: -webkit-box;
    display: -moz-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    text-align: center;
    height: 100%;    
}

.jmr-video-cb img{
  width: auto;
}
.jmr-video-cb .jmr-controlls img{
  width: 100%;
}
.jmr-controlls figure,
.jmr-controlls p{
  display: inline-block;
  margin: 0 1% 0 0;
}
.jmr-controlls figure{
  width: 7%;
}
.jmr-controlls .fa{
  margin-right: 11%;  
}
.jmr-controlls p{
  font-size: 0.7em;
  text-transform: uppercase;
  font-weight: bold;
  font-weight: 700;  
}
.jmr-controlls p:first-of-type{
  width: 27%;
}
.jmr-video-cb a{
  display: block;
}
.jmr-video-container{
  position: relative;
  padding-bottom: 56.25%;
  text-align: center;
}
.jmr-video-container > div{
  position: absolute;
  top: 0;
  left: 0;
  margin: 0 auto;
  width: 100%;
  height: 100%;
}
.jmr-overlay-wrapper{
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
.jmr-overlay-wrapper > div{
  width: 100%;
  height: 100%;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: absolute;
  top: 0;  
}
.jmr-overlay-wrapper{
  background: url("Test/video-overlay-1807x1016.jpg?$staticlink$");
  background-size: 100%;
  background-position: 50% 0;
  padding-top: calc((1016% / 1807) * 100);
  color: white;
  width: 100%;
  background-repeat: no-repeat !important;
}
.jmr-overlay-wrapper a{
  color: white;
}
.jmr-overlay-wrapper figcaption{
  font-size: 0.93em;
  text-transform: uppercase;
  font-weight: bold;
  font-weight: 700;
  letter-spacing: 0.05em;  
}

@media (min-width:700px) {
.jmr-overlay-wrapper{
  background: url("Test/video-overlay-1807x1016.jpg?$staticlink$");
  background-size: 100%;
  background-position: 50% 0;
  padding-top: calc((1016% / 1807) * 100);

}
.jmr-controlls p:first-of-type{
  width: 8%;
}
.jmr-controlls figure{
  width: 3.3%;
}

}

@media (min-width:1064px) {
.jmr-overlay-wrapper{
  background: url("Test/video-overlay-1807x1016.jpg?$staticlink$");
  background-size: 67.2%;
  background-position: 50% 0;
  padding-top: calc((1016% / 1807) * 67.2);

}
.jmr-video-container{
  padding-bottom: 37.77%; /* 56.25% = 16:9 */  
}
.jmr-video-cb .jmr-controlls{
    width: 67.2%;
}

}

</style>

<section class="jmr-video-cb-w3519-msg11 jmr-video-cb jmr-all-cb"> 
<div class="jmr-video-container">
<div>
  <div id="tpm-plugin-bexl4kbf-5kGu_ZTHlzQ"></div>
  <div class="jmr-overlay-wrapper">
    <div>
    <div>  
      <div id="jm-overlay-start">
        <!-- <h2>Play Video Header</h2> -->
          <figure>
            <a role="button" href="#play" onclick="playVideo()" aria-hidden="true" role="none" tabindex="-1">
            <img alt="" src="Test/owl.video.play.png?$staticlink$"/>
            <figcaption>Play Video</figcaption>
            </a>
          </figure>
      </div>
      <!-- <div id="jm-overlay-replay" style="display: none;">
        <h2>Replay Video Header</h2>
          <figure>
            <a href="#play" onclick="playVideo()">
            <img alt="" src="Test/owl.video.play.png?$staticlink$"/>
            <figcaption>Replay Video</figcaption>
            </a>
          </figure>
      </div> -->
    </div>
    </div>
  </div>
</div>
</div>

<div class="jmr-controlls" role="list">
  <!-- <a href="#play" onclick="playVideo()">play</a> -->
  <!-- <a href="#play" onclick="stopVideo()">stop</a> -->
  <!-- <a href="#play" onclick="pauseVideo()">pause</a> -->  
  <p role="listitem" id="jmr-second-playbutton"><a aria-label="Play Video" href="#play" onclick="playVideo()" aria-live="polite"><span class="fa fa-play"></span> Play</a></p>
  <figure role="listitem">
    <a href="https://youtu.be/EQoC-o8jwWE" onclick="pauseVideo()" target="_blank">
    <img alt="Audio Description and Transcript Available" src="Video/audio-desc-logo-100x100.png?$staticlink$"/></a>    
  </figure>
  <p role="listitem"><a href="https://youtu.be/4ZPw3-gofv4" onclick="pauseVideo()" target="_blank">Video Source</a></p>
  <!-- <p role="listitem"><a href="#play" onclick="pauseVideo()" target="_blank">Transcript</a></p> -->
</div>
</section>








<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Make sure ?enablejsapi=1 is on URL -->
<!-- <iframe id="video" src="//www.youtube.com/embed/5kGu_ZTHlzQ?enablejsapi=1&html5=1" frameborder="0" allowfullscreen></iframe> -->
<!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
<script>
// window.onscroll = function() {on_Scroll_PlayVideo()};

function on_Scroll_PlayVideo() {
   
   var hT = $('#tpm-plugin-bexl4kbf-5kGu_ZTHlzQ').offset().top,
       hH = $('#tpm-plugin-bexl4kbf-5kGu_ZTHlzQ').outerHeight(),
       wH = $(window).height(),
       wS = $(this).scrollTop();
    console.log((hT-wH) , wS);
   if (wS > (hT+hH-wH)){
     playVideo();
   }
   else{
    pauseVideo();
   }

}

  // 2. This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player;
  function onYouTubeIframeAPIReady() {
    if ($(window).width() >= 1064){  
      jmr_ytp_width= '67.2%';
    }
    else{
      jmr_ytp_width= '100%';
    };
    
    
    player = new YT.Player('tpm-plugin-bexl4kbf-5kGu_ZTHlzQ', {
      height: '100%',
      width: jmr_ytp_width,
      videoId: '4ZPw3-gofv4',
      playerVars: {enablejsapi:1, modestbranding:1, rel:0, autoplay:0, controls:1, showinfo:0, disablekb:1, iv_load_policy:3, nologo:1, showsearch:0},
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }

  // 4. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    event.target.pauseVideo();
  }

  // 5. The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),
  //    the player should play for six seconds and then stop.
  // var done = false;
  // function onPlayerStateChange(event) {
  //   if (event.data == YT.PlayerState.PLAYING && !done) {
  //     setTimeout(stopVideo, 20000);
  //     done = true;
  //   }
  // }


  // 6. Player state
  var done = false;
  var myPlayerState;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          // done = true;
          console.log('video playing');
          $('.jmr-overlay-wrapper').fadeOut();
          $('#jm-overlay-start').fadeOut();
          $('#jmr-second-playbutton a span').removeClass('fa-play').addClass('fa-pause');
          $('#jmr-second-playbutton a').html('<span class="fa fa-pause"></span>Pause').attr("aria-label","paused video");
          $('#jmr-second-playbutton a').focus();
        }
        else{
          console.log('video paused');
          $('.jmr-overlay-wrapper').fadeIn(); 
          $('#jm-overlay-start').fadeIn();
          $('#jmr-second-playbutton a').focus().html('<span class="fa fa-play"></span>Play').attr("aria-label","play video");;
          // $('#jm-overlay-replay').fadeIn();
          }
        myPlayerState = event.data;
        
      }


  var toggle_play_pause=document.getElementById("jmr-second-playbutton");
  toggle_play_pause.addEventListener("keypress",function(event){
    if(event.keyCode== 32){
      event.preventDefault();
      if(player.getPlayerState() == 1){
        pauseVideo();
      }
      else{
        playVideo();
      }
    }
  });

  // if (myPlayerState == 0){
  //   console.log('video paused 2');
  // }



  function pauseVideo() {
    player.pauseVideo();
  }
  function stopVideo() {
    player.stopVideo();
  }
  function playVideo() {
    player.playVideo();
  }


</script>